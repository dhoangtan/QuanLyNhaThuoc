@using QuanLyNhaThuoc.Models;
@using System.Data.Entity;
@using System;
@using System.Collections.Generic;
@using System.Data;
@using System.Data.Entity;
@using System.Linq;
@{
    ViewBag.Title = "ThongKe";
    Layout = "~/Views/Shared/_LayoutSideBarAdmin.cshtml";

}
<div class="container-fluid">
    <div class="row">
        <main class="col-md-9 col-lg-10 px-md-4">
            <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                <h1 class="h2">Dashboard</h1>
            </div>
            @{

                ApplicationDbContext db = new ApplicationDbContext();
                List<int> data = new List<int>();
                for (int i = 6; i >= 0; i--)
                {

                    /*var result = (from h in db.hoaDons
                                  join cthd in db.chiTietHoaDons on h.MaHoaDon equals cthd.MaHoaDon
                                  where ((DateTime.Now - h.NgayXuat).Days == i)
                                  select cthd.SoLuong).ToList();*/
                    var result = (from h in db.hoaDons
                                  join cthd in db.chiTietHoaDons on h.MaHoaDon equals cthd.MaHoaDon
                                  where (DbFunctions.DiffDays(h.NgayXuat, DateTime.Now) == i)
                                  select cthd.SoLuong);
                    if (result == null)
                    {
                        data.Add(0);
                    }
                    else
                    {
                        int temp = 0;
                        foreach(var item in result)
                        {
                            temp = temp + item;
                        }
                        data.Add(temp);
                    }

                }
                <div id="mylist" data-list="[@data[0],@data[1],@data[2],@data[3],@data[4],@data[5],@data[6]]"></div>
                <canvas class="my-4 w-100"
                        id="myChart"
                        width="900"
                        height="380"></canvas>
            }


        </main>
    </div>
</div>
<link href="~/Content/Admin-css/dashboard.css" rel="stylesheet" />

<script src="~/Scripts/bootstrap.bundle.min.js"></script>

<script src="https://cdn.jsdelivr.net/npm/feather-icons@4.28.0/dist/feather.min.js"
        integrity="sha384-uO3SXW5IuS1ZpFPKugNNWqTZRRglnUJK6UAZ/gxOX80nxEkN9NcGZTftn6RzhGWE"
        crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.4/dist/Chart.min.js"
        integrity="sha384-zNy6FEbO50N+Cg5wap8IKA4M/ZnLJgzc6w2NqACZaK0u0FXfOWRRJOnQtpZun8ha"
        crossorigin="anonymous"></script>
<script src="~/Scripts/dashboard.js"></script>